<form method="post" class="form-container" onsubmit="return validateDate()">
    {% csrf_token %}
    
    <div class="form-group">
        <label for="id_name">{% trans 'Name:' %}</label>
        {{ form.name }}
    </div>
    
    <div class="form-group">
        <label for="id_surname">{% trans 'Surname:' %}</label>
        {{ form.surname }}
    </div>
    
    <div class="form-group">
        <label for="id_phone">{% trans 'Phone:' %}</label>
        {{ form.phone }}
    </div>
    
    <div class="form-group">
        <label for="id_country">{% trans 'Country:' %}</label>
        {{ form.country }}
    </div>
    
    <div class="form-group">
        <label for="id_event_date">{% trans 'Date:' %}</label>
        {{ form.event_date }}
    </div>
    
    <button type="submit" class="submit-button">{% trans 'Submit' %}</button>
</form>

<!-- JavaScript to set min date dynamically and enforce validation -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        var dateInput = document.querySelector('input[type="date"]');
        if (dateInput) {
            var today = new Date().toISOString().split('T')[0];  // Get today's date in YYYY-MM-DD format
            dateInput.setAttribute('min', today);  // Set the minimum date to today
        }
    });

    // Additional validation to ensure no date before today is allowed
    function validateDate() {
        var dateInput = document.querySelector('input[type="date"]');
        var selectedDate = new Date(dateInput.value);
        var today = new Date();
        
        // Remove time part for an accurate comparison
        today.setHours(0, 0, 0, 0);
        selectedDate.setHours(0, 0, 0, 0);
        
        if (selectedDate < today) {
            alert("The selected date cannot be earlier than today.");
            return false;  // Prevent form submission
        }
        return true;
    }
</script>
